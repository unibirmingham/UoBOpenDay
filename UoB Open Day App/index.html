<!DOCTYPE html>
<html>
<head>
    <title>Open Day Application</title>
    <meta charset="UTF-8" />
    <link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />
    <link href="styles/main.css" rel="stylesheet" />
    <link href="styles/app.css" rel="stylesheet" />
    <link href="styles/map.css" rel="stylesheet" />
    <script src="cordova.js"></script>
    <script src="kendo/js/jquery.min.js"></script>
    <script src="kendo/js/kendo.mobile.min.js"></script>
    <script src="kendo/js/kendo.popup.min.js"></script>
    <script src="kendo/js/kendo.list.min.js"></script>
    <script src="kendo/js/kendo.dropdownlist.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/maplabel/src/maplabel-compiled.js"></script>
    <script src="scripts/moment/moment.min.js"></script>
    <script src="scripts/moment/moment-timezone.min.js"></script>
    <script src="scripts/moment/moment-timezone.london.js"></script>
    
    <!-- App scripts -->
    <script src="scripts/uob-polyfill.js"></script>
    <script src="scripts/uob-date.js"></script>
    <script src="scripts/uob-screen.js"></script>
    <script src="scripts/uob-log.js"></script>
    <script src="scripts/uob-localstorage.js"></script>
    <script src="scripts/uob-google.js"></script>
    <script src="scripts/uob-json.js"></script>
    <script src="scripts/uob-web.js"></script>
    <script src="scripts/uob-events-StartDateRepository.js"></script>
    <script src="scripts/uob-events-EventsRepository.js"></script>
    <script src="scripts/uob-map-MapRepository.js"></script>
    <script src="scripts/uob-google-GoogleMapWrapper.js"></script>
    <script src="scripts/uob-map-BuildingAndFacilitiesMap.js"></script>
    <script src="scripts/app-uobSettings.js"></script>
    <script src="scripts/app-uobOpenDay.js"></script>
    <script src="scripts/app-uobEvents.js"></script>
    <script src="scripts/app-uobMap.js"></script>
    <script src="scripts/app-uobWebpage.js"></script>
    <script src="scripts/appstart.js"></script>
</head>

<body id="appBody">
  
        <style>
            .km-favourite:after,
            .km-favourite:before
            {
                content: "\e044";
            }
            .km-personalschedule:after,
            .km-personalschedule:before
            {
                content: "\e0d2";
            }
            .km-heart:after,
            .km-heart:before
            {
                content: "\e044";
            }
            
            .km-road:after,
            .km-road:before
            {
                content: "\e0bb";
            }
            
            .km-questionmark:after,
            .km-questionmark:before
            {
                content: "\e0fb";
            }
            .km-moveup:after,
            .km-moveup:before
            {
                content: "\e011";
            }
            .km-movedown:after,
            .km-movedown:before
            {
                content: "\e012";
            }      
        </style>
    <!--Screens-->
    <!--Home-->
    <div id="tabstrip-home" data-role="view" data-title="Home">
        <div class="view-content">
            <img src="styles/images/OpenDay.jpg" width="100%"/>
            <div id="loading-message"></div>
            <div id="status-message"></div>
            <div class="open-day-date-selector">
                <ul data-role="listview" data-style="inset">
                    <li>
                        <label>Open Day:
                            <select id="open-day-date">
                            </select>
                        </label>
                    </li>
                </ul>
            </div>
            <ul data-role="listview" datatype="group">
                <li class="eventsRepositoryButton startDatesButton activitiesButton"><a data-icon="cal" href="#tabstrip-events" data-transition="slide">Activities</a></li>
                <li class="eventsRepositoryButton startDatesButton favouritesButton"><a data-icon="heart" href="#tabstrip-favourites" data-transition="slide">Favourite Activities</a></li>
                <li class="eventsRepositoryButton startDatesButton scheduleButton"><a data-icon="recents" href="#tabstrip-schedule" data-transition="slide">Personal schedule</a></li>
                <li class="mapRepositoryButton eventsRepositoryButton webConnectionButton mapButton"><a data-icon="globe" href="#tabstrip-map" data-transition="slide">Map</a></li>
                <li class="faqButton"><a data-icon="questionmark" href="#tabstrip-faqs" data-transition="slide">Open Day FAQs</a></li>
                <li class="gettingHereButton"><a data-icon="road" href="#tabstrip-getting-here" data-transition="slide">Getting here</a></li>
            </ul>
            <a class="acknowledgementButton" href="#tabstrips-acknowledgements">Acknowledgements</a>
        </div>
    </div>
    
    <!--Events screen-->
    <div id="tabstrip-events" data-role="view" data-show="app.uobEvents.populateEventList" data-title="Activities" data-layout="tabstrip-layout-with-help">
        <div class="events-type">
            <ul data-role="listview" data-style="inset">
                <li>
                    <label>Activities to show:
                        <ul id="event-activity-type-filter">
                            <li>All</li>
                            <li>Subject</li>
                            <li>General</li>
                        </ul>
                    </label>
                </li>
            </ul>
            
        </div>
        
        <ul id="open-day-events-view" class="events-list"></ul>
         
    </div>

    <div data-role="modalview" id="modalview-activities-help" style="width: 90%;">
            <div data-role="content" style="min-height: 150px">
                <a data-click="app.uobEvents.closeEventsListHelp" data-role="button" data-align="right" class="position-right">Close</a>
                <h2>Activities</h2>  
                <ul data-role="listview">
                    <li>To add an event to your favourites click on the Heart and to add an event to your personal schedule click on the clock icon. You can add as many activities as you like to your favourites but you can only add events to your schedule which do not clash.</li>
                </ul>
            </div>
    </div>
    

    <!--Favourites screen (data-show event used as it needs to repopulate in case of changes) -->
    <div id="tabstrip-favourites" data-role="view" data-show="app.uobEvents.populateFavouriteEventList" data-title="Favourite Activities">
        <ul id="open-day-favourite-events-view" class="events-list"></ul>
        
    </div>
    
    <!--Personal schedule(data-show event used as it needs to repopulate in case of changes)-->
    <div id="tabstrip-schedule" data-role="view" data-show="app.uobEvents.populateScheduleEventList" data-title="Personal Schedule" data-layout="tabstrip-layout-with-help">
        <ul id="open-day-schedule-events-view" class="events-list"></ul>
    </div>
    
    <div data-role="modalview" id="modalview-schedule-help" style="width: 90%;">
            <div data-role="content" style="min-height: 150px">
                <a data-click="app.uobEvents.closeScheduleListHelp" data-role="button" data-align="right" class="position-right">Close</a>
                <h2>Schedule</h2>  
                <ul data-role="listview">
                    <li>Events which can be visited throughout the day can have their scheduled time changed by using the arrows to move them to a later or earlier time. Those events which require you to allow some time to complete will require space in your schedule in order to move.</li>
                </ul>
            </div>
    </div>
    
    <!--Campus Map-->
    <div id="tabstrip-map"
        data-role="view"
        data-title="Campus Map"
        data-init="app.uobMap.openDayMap.initialise"
        data-show="app.uobMap.openDayMap.show"
        data-hide="app.uobMap.openDayMap.hide"
        data-stretch="true">

        <div id="no-map">
            Campus map requires internet connection to display.
        </div>
        <div id="map-header">
            <button id="map-return-to-campus"></button>
            <div class="mapMessage"></div>
            <div class="mapStatus"></div>
        </div>
        <div id="map-canvas"></div>

    </div>
      
    <!-- Registration information -->
    <div id="tabstrip-faqs" data-role="view" data-init="app.uobWebpage.getFAQs" data-title="Open Day FAQs">
        <div class="view-content">
            <div id="faqsContent">
                
            </div>
        </div>
     </div>
    
    <!-- Getting here information -->
    <div id="tabstrip-getting-here" data-role="view" data-init="app.uobWebpage.getGettingHere" data-title="Getting Here">
        <div class="view-content">
            <div id="gettingHereContent">
                
            </div>
        </div>
     </div>
    
    <!-- Settings information -->
    <div id="tabstrips-acknowledgements" data-role="view" data-init="app.uobSettings.populateSettingsInfo" data-title="Acknowledgements">
        <div class="view-content">
            <div>
                <p>This software uses the following libraries:</p>
                <ul>
                    <li>Moment.js</li>
                </ul>
            </div>
            <div><button class="position-right" id="settingsButton">Show Settings and Logs</button></div>
            <div id="settingsAndMessages" class="position-left">
                <div id="settingsContent">
                    <ul data-role="listview" data-style="inset">
                        <li>Connection type: <span class="connectionTypeData">Loading ...</span></li>
                        <li>Birmingham Web Site: <span class="birminghamWebSite">Loading ...</span></li>
                        <li>Events Web Service: <span class="eventsWebService">Loading ...</span></li>
                        <li>Maps Web Service: <span class="mapsWebService">Loading ...</span></li>
                    </ul>
                </div>    
                <div id="consoleLog">
                    
                </div>
            </div>
        </div>
     </div>
 <!--Screens End-->   
    
<!--Layout-->
    <div data-role="layout" data-id="tabstrip-layout">

        <!--Header-->
        <div data-role="header">
            <div data-role="navbar">
                <a class="nav-button" data-align="left" data-role="backbutton">Back</a>
                <span data-role="view-title"></span>
            </div>
        </div>

        <!--Footer-->
        <div id="appFooter" data-role="footer">
            <div data-role="tabstrip">
                <a href="#tabstrip-home" data-icon="home">Home</a>
                <a class="eventsRepositoryButton startDatesButton" href="#tabstrip-events" data-icon="cal">Activities</a>
                <a class="eventsRepositoryButton startDatesButton" href="#tabstrip-schedule" data-icon="recents">Schedule</a>
                <a class="mapRepositoryButton eventsRepositoryButton webConnectionButton" href="#tabstrip-map" data-icon="globe">Map</a>
            </div>
        </div>
    </div>
    <div data-role="layout" data-id="tabstrip-layout-with-help">
        <!--Header-->
        <div data-role="header">
            <div data-role="navbar">
                <a class="nav-button" data-align="left" data-role="backbutton">Back</a>
                <span data-role="view-title"></span>
                <a data-role="button" data-click="app.uobEvents.openHelp" data-align="right" data-icon="questionmark" id="header-help-button"></a>
            </div>
        </div>
		<!--Footer-->
        <div id="appFooterWithHelp" data-role="footer">
            <div data-role="tabstrip">
                <a href="#tabstrip-home" data-icon="home">Home</a>
                <a class="eventsRepositoryButton startDatesButton" href="#tabstrip-events" data-icon="cal">Activities</a>
                <a class="eventsRepositoryButton startDatesButton" href="#tabstrip-schedule" data-icon="recents">Schedule</a>
                <a class="mapRepositoryButton eventsRepositoryButton webConnectionButton" href="#tabstrip-map" data-icon="globe">Map</a>
            </div>
        </div>
	</div>    
    
<!-- Layout End -->
    
    <!-- Template Loading -->
    <script src="scripts/templateLoader.js"></script>
        
    <script>
        app.application = new kendo.mobile.Application(document.body, { 
            layout: "tabstrip-layout",
            skin: "flat"
        });

    </script>
    
    <script>
        //load templates
        templateLoader.loadExtTemplate("templates/events.tmpl.html");
        templateLoader.loadExtTemplate("templates/events-schedule.tmpl.html");
    </script>

</body>
</html>